<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>Cumulocity C++ SmartREST Library: SrReporter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cumulocity C++ SmartREST Library
   &#160;<span id="projectnumber">2.4</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classSrReporter.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="classSrReporter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SrReporter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The reporter thread for sending all requests to Cumulocity.  
 <a href="classSrReporter.html#details">More...</a></p>

<p><code>#include &lt;srreporter.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a54930a2284d230630a6246b011fe9c16"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSrReporter.html#a54930a2284d230630a6246b011fe9c16">SrReporter</a> (const string &amp;server, const string &amp;xid, const string &amp;auth, <a class="el" href="classSrQueue.html">SrQueue</a>&lt; <a class="el" href="structSrNews.html">SrNews</a> &gt; &amp;out, <a class="el" href="classSrQueue.html">SrQueue</a>&lt; <a class="el" href="structSrOpBatch.html">SrOpBatch</a> &gt; &amp;in, uint16_t cap=1000, const string buffile=&quot;&quot;)</td></tr>
<tr class="memdesc:a54930a2284d230630a6246b011fe9c16"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a> HTTP constructor.  <a href="#a54930a2284d230630a6246b011fe9c16">More...</a><br /></td></tr>
<tr class="separator:a54930a2284d230630a6246b011fe9c16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18b33819feee313f03ce5839509e4e65"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSrReporter.html#a18b33819feee313f03ce5839509e4e65">SrReporter</a> (const string &amp;server, const string &amp;deviceId, const string &amp;xid, const string &amp;user, const string &amp;pass, <a class="el" href="classSrQueue.html">SrQueue</a>&lt; <a class="el" href="structSrNews.html">SrNews</a> &gt; &amp;out, <a class="el" href="classSrQueue.html">SrQueue</a>&lt; <a class="el" href="structSrOpBatch.html">SrOpBatch</a> &gt; &amp;in, uint16_t cap=1000, const string buffile=&quot;&quot;)</td></tr>
<tr class="memdesc:a18b33819feee313f03ce5839509e4e65"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a> MQTT constructor.  <a href="#a18b33819feee313f03ce5839509e4e65">More...</a><br /></td></tr>
<tr class="separator:a18b33819feee313f03ce5839509e4e65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fe030b764d3a688bf21bc12e534557a"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSrReporter.html#a5fe030b764d3a688bf21bc12e534557a">capacity</a> () const</td></tr>
<tr class="memdesc:a5fe030b764d3a688bf21bc12e534557a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current capacity of the request buffer.  <a href="#a5fe030b764d3a688bf21bc12e534557a">More...</a><br /></td></tr>
<tr class="separator:a5fe030b764d3a688bf21bc12e534557a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2ff76318b5fd5e47beccd5e5a03af16"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSrReporter.html#ad2ff76318b5fd5e47beccd5e5a03af16">setCapacity</a> (uint16_t cap)</td></tr>
<tr class="memdesc:ad2ff76318b5fd5e47beccd5e5a03af16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the capacity of the request buffer.  <a href="#ad2ff76318b5fd5e47beccd5e5a03af16">More...</a><br /></td></tr>
<tr class="separator:ad2ff76318b5fd5e47beccd5e5a03af16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af53d3618f1c459921cdeeded86ecbac5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSrReporter.html#af53d3618f1c459921cdeeded86ecbac5">start</a> ()</td></tr>
<tr class="memdesc:af53d3618f1c459921cdeeded86ecbac5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the <a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a> thread.  <a href="#af53d3618f1c459921cdeeded86ecbac5">More...</a><br /></td></tr>
<tr class="separator:af53d3618f1c459921cdeeded86ecbac5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae15a70f6659b6d9fe4dc6dd84c84388b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSrReporter.html#ae15a70f6659b6d9fe4dc6dd84c84388b">isSleeping</a> () const</td></tr>
<tr class="memdesc:ae15a70f6659b6d9fe4dc6dd84c84388b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the <a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a> is sleeping.  <a href="#ae15a70f6659b6d9fe4dc6dd84c84388b">More...</a><br /></td></tr>
<tr class="separator:ae15a70f6659b6d9fe4dc6dd84c84388b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f668ee0837ce89249b9c234003cffcc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSrReporter.html#a3f668ee0837ce89249b9c234003cffcc">sleep</a> ()</td></tr>
<tr class="memdesc:a3f668ee0837ce89249b9c234003cffcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put the <a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a> to sleep.  <a href="#a3f668ee0837ce89249b9c234003cffcc">More...</a><br /></td></tr>
<tr class="separator:a3f668ee0837ce89249b9c234003cffcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41cf05f04a2903c397682ae1c2ceff06"><td class="memItemLeft" align="right" valign="top"><a id="a41cf05f04a2903c397682ae1c2ceff06"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSrReporter.html#a41cf05f04a2903c397682ae1c2ceff06">resume</a> ()</td></tr>
<tr class="memdesc:a41cf05f04a2903c397682ae1c2ceff06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resume a sleeping <a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a>. Resume a non-sleeping <a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a> has no effect. <br /></td></tr>
<tr class="separator:a41cf05f04a2903c397682ae1c2ceff06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a428ebf9906031565adc2c729c302928d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSrReporter.html#a428ebf9906031565adc2c729c302928d">mqttSetOpt</a> (int option, long parameter)</td></tr>
<tr class="memdesc:a428ebf9906031565adc2c729c302928d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set various options for MQTT.  <a href="#a428ebf9906031565adc2c729c302928d">More...</a><br /></td></tr>
<tr class="separator:a428ebf9906031565adc2c729c302928d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:aaba2122a9aa4e6d8abd72e1fd0d5aec9"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSrReporter.html#aaba2122a9aa4e6d8abd72e1fd0d5aec9">func</a> (void *arg)</td></tr>
<tr class="memdesc:aaba2122a9aa4e6d8abd72e1fd0d5aec9"><td class="mdescLeft">&#160;</td><td class="mdescRight">pthread routine function.  <a href="#aaba2122a9aa4e6d8abd72e1fd0d5aec9">More...</a><br /></td></tr>
<tr class="separator:aaba2122a9aa4e6d8abd72e1fd0d5aec9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The reporter thread for sending all requests to Cumulocity. </p>
<p>The <a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a> is responsible for sending all requests (measurements, alarms, events, etc.) to Cumulocity. For traffic saving, the <a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a> implements request aggregation when there are consecutive requests in the queue within less than SR_REPORTER_VAL (default 400) milliseconds. It also implements a multiple retry and exponential waiting mechanism for counteracting the instability of mobile networks. Additionally, it implements a capacity limited buffering technique for counteracting long period of network error. This buffering technique can be further categorized into memory backed and file backed buffering. Memory backed buffering is more efficient since there is no file I/O involved, while the buffering is limited by the available memory and doesn't survive a sudden outage. Oppositely, file backed buffering performs a lot of file I/O operations, but at the same time, its capacity is much larger and buffered messages will not be lost in case of sudden outage. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a54930a2284d230630a6246b011fe9c16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54930a2284d230630a6246b011fe9c16">&#9670;&nbsp;</a></span>SrReporter() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SrReporter::SrReporter </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>xid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>auth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSrQueue.html">SrQueue</a>&lt; <a class="el" href="structSrNews.html">SrNews</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSrQueue.html">SrQueue</a>&lt; <a class="el" href="structSrOpBatch.html">SrOpBatch</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cap</em> = <code>1000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string&#160;</td>
          <td class="paramname"><em>buffile</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a> HTTP constructor. </p>
<p>Construct a <a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a> instance which uses <a class="el" href="classSrNetHttp.html" title="Tailored HTTP implementation for Cumulocity SmartREST protocol. Supports both HTTP and HTTPS...">SrNetHttp</a> as underlying network stack.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>Cumulocity server URL (no trailing slash). </td></tr>
    <tr><td class="paramname">xid</td><td>eXternal ID of the registered SmartREST template. </td></tr>
    <tr><td class="paramname">auth</td><td>authentication token from <a class="el" href="classSrAgent.html" title="Main implementation of a device agent. ">SrAgent</a>. </td></tr>
    <tr><td class="paramname">out</td><td>reference to the <a class="el" href="classSrAgent.html" title="Main implementation of a device agent. ">SrAgent</a> egress queue. </td></tr>
    <tr><td class="paramname">in</td><td>reference to the <a class="el" href="classSrAgent.html" title="Main implementation of a device agent. ">SrAgent</a> ingress queue. </td></tr>
    <tr><td class="paramname">cap</td><td>capacity of the request buffer. </td></tr>
    <tr><td class="paramname">buffile</td><td>file name for file-backed buffering. Default is memory backed buffering. Set it to a non empty string enable file backed buffering. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a18b33819feee313f03ce5839509e4e65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18b33819feee313f03ce5839509e4e65">&#9670;&nbsp;</a></span>SrReporter() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SrReporter::SrReporter </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>deviceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>xid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>pass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSrQueue.html">SrQueue</a>&lt; <a class="el" href="structSrNews.html">SrNews</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSrQueue.html">SrQueue</a>&lt; <a class="el" href="structSrOpBatch.html">SrOpBatch</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cap</em> = <code>1000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string&#160;</td>
          <td class="paramname"><em>buffile</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a> MQTT constructor. </p>
<p>Construct a <a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a> instance which uses <a class="el" href="classSrNetMqtt.html" title="Generic MQTT network stack implementation. ">SrNetMqtt</a> as underlying network stack.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>Cumulocity server URL. Use correct port for MQTT, i.e., 1883 for plain MQTT, 8883 for MQTT + TLS by standard. For enabling TLS, you still need to prepend the URL with https. </td></tr>
    <tr><td class="paramname">deviceId</td><td>device ID, same as <a class="el" href="classSrAgent.html#ae481760ca8a7d54ff458dc5bf218ffeb" title="Get the unique device ID. ">SrAgent.deviceID()</a>. </td></tr>
    <tr><td class="paramname">xid</td><td>SmartREST template IXD. </td></tr>
    <tr><td class="paramname">user</td><td>MQTT Connect username, should be <a class="el" href="classSrAgent.html#a485999f5409fac5e523712b003bc125b" title="Get the Cumulocity tenant this device is registered to. ">SrAgent.tenant()</a> + '/' + <a class="el" href="classSrAgent.html#adc99b42235b2513abb9dd787aa635025" title="Get the username this device received from registration. ">SrAgent.username()</a>. </td></tr>
    <tr><td class="paramname">pass</td><td>MQTT Connect pass, should be <a class="el" href="classSrAgent.html#ae3bb5ee0d522e5bc8e637d07d7485e1f" title="Get the password this device received from registration. ">SrAgent.password()</a>. </td></tr>
    <tr><td class="paramname">out</td><td>reference to the <a class="el" href="classSrAgent.html" title="Main implementation of a device agent. ">SrAgent</a> egress queue. </td></tr>
    <tr><td class="paramname">in</td><td>reference to the <a class="el" href="classSrAgent.html" title="Main implementation of a device agent. ">SrAgent</a> ingress queue. </td></tr>
    <tr><td class="paramname">cap</td><td>capacity of the request buffer. </td></tr>
    <tr><td class="paramname">buffile</td><td>file name for file-backed buffering. Default is memory backed buffering. Set it to a non empty string enable file backed buffering. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5fe030b764d3a688bf21bc12e534557a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fe030b764d3a688bf21bc12e534557a">&#9670;&nbsp;</a></span>capacity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t SrReporter::capacity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current capacity of the request buffer. </p>
<p>capacity signifies the capacity of the underlying buffering mechanism. For memory backed buffering, it signifies the number of messages can be buffered. For file backed buffering, it signifies the number of file pages available.</p>
<p>Messages with SR_PRIO_BUF bit set will be buffered when the network is unavailable. However, when the network is down for longer time, and the number of messages with SR_PRIO_BUF bit set exceeds the defined capacity, older messages will be discarded.</p>
<dl class="section note"><dt>Note</dt><dd>Message buffering is intended for messages with higher demand of reliability because of temporary network error. Abuse of SR_PRIO_BUF bit by setting it for all messages will not only downgrade agent's performance, but also real important messages will often be discarded.</dd>
<dd>
The actual buffered messages will often be less than capacity because auxiliary messages for setting XIDs will also take space. Therefore, it's sensible not to use many SmartREST templates. For file backed buffering, page fragmentation will also waste a fraction of the capacity. </dd></dl>

</div>
</div>
<a id="ad2ff76318b5fd5e47beccd5e5a03af16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2ff76318b5fd5e47beccd5e5a03af16">&#9670;&nbsp;</a></span>setCapacity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SrReporter::setCapacity </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the capacity of the request buffer. </p>
<p>If the new capacity is smaller than already buffered messages, already buffered messages will NOT be discarded immediately, rather, they are only guaranteed to be eventually discarded or successfully sent, and the buffer capacity will eventually converges to the new capacity.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cap</td><td>new buffer capacity. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af53d3618f1c459921cdeeded86ecbac5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af53d3618f1c459921cdeeded86ecbac5">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SrReporter::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the <a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a> thread. </p>
<dl class="section return"><dt>Returns</dt><dd>0 for success, failure otherwise. </dd></dl>

</div>
</div>
<a id="ae15a70f6659b6d9fe4dc6dd84c84388b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae15a70f6659b6d9fe4dc6dd84c84388b">&#9670;&nbsp;</a></span>isSleeping()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SrReporter::isSleeping </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the <a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a> is sleeping. </p>
<dl class="section return"><dt>Returns</dt><dd>true if sleeping, false otherwise. </dd></dl>

</div>
</div>
<a id="a3f668ee0837ce89249b9c234003cffcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f668ee0837ce89249b9c234003cffcc">&#9670;&nbsp;</a></span>sleep()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SrReporter::sleep </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Put the <a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a> to sleep. </p>
<p><a class="el" href="structSrNews.html" title="Data type represents a SmartREST request (measurement, alarm, etc.). ">SrNews</a> with SR_PRIO_BUF bit set will be buffered, other messages will be discarded. Sleeping an already slept <a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a> has no effect. </p>

</div>
</div>
<a id="a428ebf9906031565adc2c729c302928d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a428ebf9906031565adc2c729c302928d">&#9670;&nbsp;</a></span>mqttSetOpt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SrReporter::mqttSetOpt </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>parameter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set various options for MQTT. </p>
<p>Supported MQTT option list:</p>
<ul>
<li>SR_MQTTOPT_KEEPALIVE [E]: MQTT keepalive interval in seconds.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">option</td><td>various MQTT options. </td></tr>
    <tr><td class="paramname">parameter</td><td>value for corresponding MQTT option.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Options marked with [E] must be set before calling <a class="el" href="classSrReporter.html#af53d3618f1c459921cdeeded86ecbac5" title="Start the SrReporter thread. ">start()</a>, as they would otherwise has no effect. </dd></dl>

</div>
</div>
<a id="aaba2122a9aa4e6d8abd72e1fd0d5aec9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaba2122a9aa4e6d8abd72e1fd0d5aec9">&#9670;&nbsp;</a></span>func()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* SrReporter::func </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>pthread routine function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>pointer to a <a class="el" href="classSrReporter.html" title="The reporter thread for sending all requests to Cumulocity. ">SrReporter</a> instance. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classSrReporter.html">SrReporter</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
