<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>Cumulocity C++ SmartREST Library: SrQueue&lt; T &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cumulocity C++ SmartREST Library
   &#160;<span id="projectnumber">2.4</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classSrQueue.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classSrQueue-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SrQueue&lt; T &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Multi-thread communication queue.  
 <a href="classSrQueue.html#details">More...</a></p>

<p><code>#include &lt;srqueue.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:afad18e583680cf64409a187bb223fd95"><td class="memItemLeft" align="right" valign="top"><a id="afad18e583680cf64409a187bb223fd95"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSrQueue.html#afad18e583680cf64409a187bb223fd95">ErrCode</a> { <br />
&#160;&#160;<b>Q_OK</b> = 0, 
<b>Q_TIMEOUT</b>, 
<b>Q_BUSY</b>, 
<b>Q_EMPTY</b>, 
<br />
&#160;&#160;<b>Q_NOTIME</b>
<br />
 }<tr class="memdesc:afad18e583680cf64409a187bb223fd95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enumeration of all possible error code. <br /></td></tr>
</td></tr>
<tr class="separator:afad18e583680cf64409a187bb223fd95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac32d9d5361aaf9149bd67c522939d9be"><td class="memItemLeft" align="right" valign="top">typedef std::pair&lt; T, <a class="el" href="classSrQueue.html#afad18e583680cf64409a187bb223fd95">ErrCode</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSrQueue.html#ac32d9d5361aaf9149bd67c522939d9be">Event</a></td></tr>
<tr class="memdesc:ac32d9d5361aaf9149bd67c522939d9be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event wraps the element type and an error code.  <a href="#ac32d9d5361aaf9149bd67c522939d9be">More...</a><br /></td></tr>
<tr class="separator:ac32d9d5361aaf9149bd67c522939d9be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a514216d15da5628196890e6b71884417"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSrQueue.html#ac32d9d5361aaf9149bd67c522939d9be">Event</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSrQueue.html#a514216d15da5628196890e6b71884417">get</a> ()</td></tr>
<tr class="memdesc:a514216d15da5628196890e6b71884417"><td class="mdescLeft">&#160;</td><td class="mdescRight">get an element from the queue.  <a href="#a514216d15da5628196890e6b71884417">More...</a><br /></td></tr>
<tr class="separator:a514216d15da5628196890e6b71884417"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abae81ad51e45c1c015a64f20d1a39527"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSrQueue.html#ac32d9d5361aaf9149bd67c522939d9be">Event</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSrQueue.html#abae81ad51e45c1c015a64f20d1a39527">get</a> (int millisec)</td></tr>
<tr class="memdesc:abae81ad51e45c1c015a64f20d1a39527"><td class="mdescLeft">&#160;</td><td class="mdescRight">get an element from the queue.  <a href="#abae81ad51e45c1c015a64f20d1a39527">More...</a><br /></td></tr>
<tr class="separator:abae81ad51e45c1c015a64f20d1a39527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb92577b911fe4a2daa33c5b611c322e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSrQueue.html#afb92577b911fe4a2daa33c5b611c322e">put</a> (const T &amp;item)</td></tr>
<tr class="memdesc:afb92577b911fe4a2daa33c5b611c322e"><td class="mdescLeft">&#160;</td><td class="mdescRight">put element item into the queue.  <a href="#afb92577b911fe4a2daa33c5b611c322e">More...</a><br /></td></tr>
<tr class="separator:afb92577b911fe4a2daa33c5b611c322e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ec67da39edc8abe45f9745a8215c803"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSrQueue.html#a8ec67da39edc8abe45f9745a8215c803">size</a> () const</td></tr>
<tr class="memdesc:a8ec67da39edc8abe45f9745a8215c803"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the number of elements in the queue.  <a href="#a8ec67da39edc8abe45f9745a8215c803">More...</a><br /></td></tr>
<tr class="separator:a8ec67da39edc8abe45f9745a8215c803"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0852bc138d06570ffa1c0772200e5aa"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSrQueue.html#ae0852bc138d06570ffa1c0772200e5aa">empty</a> () const</td></tr>
<tr class="memdesc:ae0852bc138d06570ffa1c0772200e5aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">check if the queue is empty.  <a href="#ae0852bc138d06570ffa1c0772200e5aa">More...</a><br /></td></tr>
<tr class="separator:ae0852bc138d06570ffa1c0772200e5aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T&gt;<br />
class SrQueue&lt; T &gt;</h3>

<p>Multi-thread communication queue. </p>
<p><a class="el" href="classSrQueue.html" title="Multi-thread communication queue. ">SrQueue</a> is a consumer/producer queue for multi-thread communication. It uses the mutex facility from pthread to implement atomic get and put operations, and semaphore to avoid busy waiting. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="ac32d9d5361aaf9149bd67c522939d9be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac32d9d5361aaf9149bd67c522939d9be">&#9670;&nbsp;</a></span>Event</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef std::pair&lt;T, <a class="el" href="classSrQueue.html#afad18e583680cf64409a187bb223fd95">ErrCode</a>&gt; <a class="el" href="classSrQueue.html">SrQueue</a>&lt; T &gt;::<a class="el" href="classSrQueue.html#ac32d9d5361aaf9149bd67c522939d9be">Event</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Event wraps the element type and an error code. </p>
<p>The error code must be first checked before access the element T. When the error code is not 0, element T is default constructed, thus element T requires a default constructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a514216d15da5628196890e6b71884417"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a514216d15da5628196890e6b71884417">&#9670;&nbsp;</a></span>get() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSrQueue.html#ac32d9d5361aaf9149bd67c522939d9be">Event</a> <a class="el" href="classSrQueue.html">SrQueue</a>&lt; T &gt;::get </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>get an element from the queue. </p>
<p>This a blocking call, it never returns until the underlying semaphore signals that there is at least one element available in the queue. </p><dl class="section note"><dt>Note</dt><dd>You must still check the error code after this function returns, as the mutex locking may fail, or another thread may have retrieved the element first.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>the element T with error code. </dd></dl>

</div>
</div>
<a id="abae81ad51e45c1c015a64f20d1a39527"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abae81ad51e45c1c015a64f20d1a39527">&#9670;&nbsp;</a></span>get() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSrQueue.html#ac32d9d5361aaf9149bd67c522939d9be">Event</a> <a class="el" href="classSrQueue.html">SrQueue</a>&lt; T &gt;::get </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>millisec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>get an element from the queue. </p>
<p>Similar to the get function with no parameter, except this function waits at most milliseconds instead of waiting forever. This function can fail additionally when timed out. Calling this function with negative value causes undefined behaviour.</p>
<dl class="section return"><dt>Returns</dt><dd>the element T with error code. </dd></dl>

</div>
</div>
<a id="afb92577b911fe4a2daa33c5b611c322e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb92577b911fe4a2daa33c5b611c322e">&#9670;&nbsp;</a></span>put()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classSrQueue.html">SrQueue</a>&lt; T &gt;::put </td>
          <td>(</td>
          <td class="paramtype">const T &amp;&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>put element item into the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>the element to put into the queue. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 otherwise. </dd></dl>

</div>
</div>
<a id="a8ec67da39edc8abe45f9745a8215c803"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ec67da39edc8abe45f9745a8215c803">&#9670;&nbsp;</a></span>size()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classSrQueue.html">SrQueue</a>&lt; T &gt;::size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>get the number of elements in the queue. </p>
<dl class="section note"><dt>Note</dt><dd>This function is not thread-safe, it should only be used as a hint rather than an accurate measure.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>the number of elements currently in the queue. </dd></dl>

</div>
</div>
<a id="ae0852bc138d06570ffa1c0772200e5aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0852bc138d06570ffa1c0772200e5aa">&#9670;&nbsp;</a></span>empty()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classSrQueue.html">SrQueue</a>&lt; T &gt;::empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>check if the queue is empty. </p>
<dl class="section note"><dt>Note</dt><dd>This function is not thread-safe, it should only be used as a hint rather than an accurate measure.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>true if the queue is empty, false otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classSrQueue.html">SrQueue</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
